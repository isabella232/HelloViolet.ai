---
layout: docs
title: 'JSDoc: Source: violet-conversations/lib/utils.js'
---


  <h1 class="page-title">Source: violet-conversations/lib/utils.js</h1>


<div id="generatedNav" style="display:none">
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-conversationEngine.html">conversationEngine</a></li><li><a href="module-flowScriptCompiler.html">flowScriptCompiler</a></li><li><a href="module-outputMgr.html">outputMgr</a></li><li><a href="module-response.html">response</a></li><li><a href="module-scriptParser.html">scriptParser</a></li><li><a href="module-utils.html">utils</a></li><li><a href="module-violet.html">violet</a></li><li><a href="module-violetList.html">violetList</a></li><li><a href="module-violetSrvr.html">violetSrvr</a></li><li><a href="module-violetStorePG.html">violetStorePG</a></li><li><a href="module-violetStoreSF.html">violetStoreSF</a></li><li><a href="module-violetTime.html">violetTime</a></li></ul><h3>Classes</h3><ul><li><a href="AlexaPlatform.html">AlexaPlatform</a></li><li><a href="module-conversationEngine-ConversationEngine.html">ConversationEngine</a></li><li><a href="module-conversationEngine-IntentMgr.html">IntentMgr</a></li><li><a href="module-conversationEngine-PlatformMgr.html">PlatformMgr</a></li><li><a href="module-conversationEngine-PlatformPlugin.html">PlatformPlugin</a></li><li><a href="module-conversationEngine-PlatformReq.html">PlatformReq</a></li><li><a href="module-flowScriptCompiler-ConvoDoc.html">ConvoDoc</a></li><li><a href="module-flowScriptCompiler-ConvoEl.html">ConvoEl</a></li><li><a href="module-flowScriptCompiler-FlowScriptCompiler.html">FlowScriptCompiler</a></li><li><a href="module-outputMgr-OutputMgr.html">OutputMgr</a></li><li><a href="module-response-Response.html">Response</a></li><li><a href="module-scriptParser-ScriptParser.html">ScriptParser</a></li><li><a href="module-violetList-ListWidget.html">ListWidget</a></li><li><a href="module-violetList-listWidget_.html">listWidget</a></li><li><a href="module-violetStorePG-VioletStorePG.html">VioletStorePG</a></li><li><a href="module-violetStoreSF-VioletStoreSF.html">VioletStoreSF</a></li><li><a href="StorePlugin.html">StorePlugin</a></li></ul><h3>Events</h3><ul><li><a href="global.html#event:(unnamed)">(unnamed)</a></li><li><a href="module-conversationEngine.html#~event:closeSession">closeSession</a></li><li><a href="global.html#event:Howdy">Howdy</a></li><li><a href="global.html#event:HowWork">HowWork</a></li><li><a href="global.html#event:Intro">Intro</a></li><li><a href="global.html#event:MajorIntent">MajorIntent</a></li><li><a href="global.html#event:setAlert">setAlert</a></li><li><a href="module-violetTime.html#~event:timeFwd">timeFwd</a></li><li><a href="module-violetTime.html#~event:timeReq">timeReq</a></li><li><a href="global.html#event:unsetAlert">unsetAlert</a></li><li><a href="global.html#event:WakeUp">WakeUp</a></li></ul>
</div>

<div class="codeDocs">
{% raw %}




    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* Copyright (c) 2017-present, salesforce.com, inc. All rights reserved */
/* Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license */

/**
 * This is a module of general purpose utilities that are helpful when building
 * Voice apps
 *
 * @module utils
 */

var fs = require('fs');
var path = require('path');
var Promise = require('bluebird');

/**
 *  Loads a newline seperated array from a file - especially helpful when you
 *  have a long list of possible values
 *
 * @example
 *  violet.addInputTypes({
 *    category: {
 *      type: 'categoryType',
 *      values: utils.loadArrayFromFile(__dirname, 'potentialCategories.txt')
 *    }
 *  });
 * @param {string} dirName - path to target file
 * @param {string} fileName - newline seperated array backed file
 */
exports.loadArrayFromFile =  function(dirName, fileName) {
  return fs.readFileSync(path.join(dirName, fileName), 'utf8')
      .split('\n')
      .filter(v=>{return v.length>0;});
};

/**
 * Returns a random number
 *
 * @param {Number} min - generated number is to not be below this
 * @param {Number} max - generated number is to not be greater than this
 */
exports.getRand =  function(min, max) {
  return Math.floor(Math.random() * (max - min)) + min;
};

/**
 * Converts an array to a string
 *
 * @example
 *   utils.getArrAsStr([1, 2, 3])
 *   // returns '1, 2 and 3'
 * @param {Object[]} arr - array of objects to be pulled togeter into a string
 */
exports.getArrAsStr = function(arr) {
  if (arr.length==1) return arr[0];
  arr.splice(arr.length-1, 0, 'and');
  return arr.join(', ').replace(', and, ', ' and ');
}

/** Converts numbers 0-999 to a string
 * @function getNumAsStr
 * @param {Number} num - that is converted into a string, i.e. 11 -> eleven
 */
var _getNumAsStr = exports.getNumAsStr = function(num, subpart=false) {
  if (typeof num == 'string') num = parseInt(num);
  if (num&lt;0) return 'err';
  if (num==0) {
    if (subpart) return '';
    if (!subpart) return 'zero';
  }
  var hdr = ''; if (subpart) hdr = ' ';
  if (num&lt;20) switch(num) {
    case 1: return hdr + 'one';
    case 2: return hdr + 'two';
    case 3: return hdr + 'three';
    case 4: return hdr + 'four';
    case 5: return hdr + 'five';
    case 6: return hdr + 'six';
    case 7: return hdr + 'seven';
    case 8: return hdr + 'eight';
    case 9: return hdr + 'nine';
    case 10: return hdr + 'ten';
    case 11: return hdr + 'eleven';
    case 12: return hdr + 'twelve';
    case 13: return hdr + 'thirteen';
    case 14: return hdr + 'fourteen';
    case 15: return hdr + 'fifteen';
    case 16: return hdr + 'sixteen';
    case 17: return hdr + 'seventeen';
    case 18: return hdr + 'eighteen';
    case 19: return hdr + 'nineteen';
  };
  if (num&lt;20+10) return hdr + 'twenty' + _getNumAsStr(num-20, /*subpart*/true);
  if (num&lt;30+10) return hdr + 'thirty' + _getNumAsStr(num-30, /*subpart*/true);
  if (num&lt;40+10) return hdr + 'forty' + _getNumAsStr(num-40, /*subpart*/true);
  if (num&lt;50+10) return hdr + 'fifty' + _getNumAsStr(num-50, /*subpart*/true);
  if (num&lt;60+10) return hdr + 'sixty' + _getNumAsStr(num-60, /*subpart*/true);
  if (num&lt;70+10) return hdr + 'seventy' + _getNumAsStr(num-70, /*subpart*/true);
  if (num&lt;80+10) return hdr + 'eighty' + _getNumAsStr(num-80, /*subpart*/true);
  if (num&lt;90+10) return hdr + 'ninety' + _getNumAsStr(num-90, /*subpart*/true);
  if (num&lt;100+100) return hdr + 'one hundred' + _getNumAsStr(num-100, /*subpart*/true);
  if (num&lt;200+100) return hdr + 'two hundred' + _getNumAsStr(num-200, /*subpart*/true);
  if (num&lt;300+100) return hdr + 'three hundred' + _getNumAsStr(num-300, /*subpart*/true);
  if (num&lt;400+100) return hdr + 'four hundred' + _getNumAsStr(num-400, /*subpart*/true);
  if (num&lt;500+100) return hdr + 'five hundred' + _getNumAsStr(num-500, /*subpart*/true);
  if (num&lt;600+100) return hdr + 'six hundred' + _getNumAsStr(num-600, /*subpart*/true);
  if (num&lt;700+100) return hdr + 'seven hundred' + _getNumAsStr(num-700, /*subpart*/true);
  if (num&lt;800+100) return hdr + 'eight hundred' + _getNumAsStr(num-800, /*subpart*/true);
  if (num&lt;900+100) return hdr + 'nine hundred' + _getNumAsStr(num-900, /*subpart*/true);
  return 'err';
};

/** Supporting While Loop with promises
 * @deprecated Use the module 'promise-while' instead
 * @function promiseWhile
 * @param {Function} condition - function returning a boolean as to whether the loop should run
 * @param {Function} action - function returning a promise and performing the loop action
 */
var promiseWhile = exports.promiseWhile = Promise.method(function(condition, action) {
  if (!condition()) return;
  return action().then(promiseWhile.bind(null, condition, action));
});
// var _promiseFor = Promise.method(function(condition, action, value) {
//   /*assumes that action returns updated value*/
//   if (!condition(value)) return value;
//   return action(value).then(_promiseFor.bind(null, condition, action));
// });
</code></pre>
        </article>
    </section>




{% endraw %}
</div>


<footer class="container">
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sat Mar 14 2020 19:07:22 GMT-0400 (EDT)
</footer>

<script> /*prettyPrint();*/ </script>
<!-- script src="scripts/linenumber.js"> </script -->
<script>
  // prism-ize: add language type and line-numbers
  var codeEntries = document.getElementsByTagName('pre');
  for (var ndx=0; ndx<codeEntries.length; ndx++) {
    var node = codeEntries[ndx];
    if (node.children.length!=1 && node.children[0].tagName!='CODE') continue;
    if (!node.className.match(/lang/)) node.className += ' language-javascript'
    if (node.className.match(/linenums/)) node.className += ' line-numbers'
  }
  // changes '<h3 class="subsection-title">Events</h3>'==><h3 class="subsection-title">Intents</h3>
  var headingEntries = document.getElementsByTagName('h3');
  for (var ndx=0; ndx<headingEntries.length; ndx++) {
    var node = headingEntries[ndx];
    if (node.className !== 'subsection-title') continue;
    if (node.textContent == 'Events') node.textContent = 'Intents';
  }
</script>
